<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <base href="/">
    <title>Employee Management Application</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
      }
      
      #app {
        min-height: 100vh;
      }
      
      nav {
        background-color: #ffffff;
        padding: 12px 24px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid #e0e0e0;
      }
      
      .nav-left {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .logo {
        height: 32px;
        width: 32px;
        cursor: pointer;
      }
      
      .brand-text {
        font-size: 20px;
        font-weight: bold;
        color: #333333 !important;
        cursor: pointer;
        text-decoration: none;
      }
      
      .brand-text:visited {
        color: #333333 !important;
      }
      
      .brand-text:hover {
        color: #333333 !important;
      }
      
      .nav-right {
        display: flex;
        align-items: center;
        gap: 16px;
      }
      
      .nav-item {
        display: flex;
        align-items: center;
        gap: 6px;
        color: #FF6200;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        padding: 6px 12px;
        border-radius: 4px;
        transition: background-color 0.2s;
      }
      
      .nav-item:hover {
        background-color: #f8f9fa;
      }
      
      .nav-icon {
        width: 16px;
        height: 16px;
      }
      
      .language-flag {
        width: 24px;
        height: 16px;
        cursor: pointer;
        border-radius: 2px;
      }
      
      .language-switcher select {
        background-color: #495057;
        color: white;
        border: 1px solid #6c757d;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 14px;
      }
      
      #outlet {
        background-color: white;
        min-height: calc(100vh - 70px);
      }
    </style>
  </head>
  <body>
    <div id="app">
      <nav>
        <div class="nav-left">
          <img src="/src/assets/images/ing-logo.svg" alt="ING Logo" class="logo" onclick="window.location.href='/'">
          <a href="/" class="brand-text">ING</a>
        </div>
        <div class="nav-right">
          <a href="/" class="nav-item" id="nav-home">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            <span id="nav-home-text">Employees</span>
          </a>
          <a href="/add" class="nav-item" id="nav-add">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            <span id="nav-add-text">Add New</span>
          </a>
          <img src="/src/assets/images/flag-tr.svg" alt="Turkish" class="language-flag" id="language-flag" onclick="toggleLanguage()">
        </div>
      </nav>
      <div id="outlet"></div>
    </div>
    <script type="module" src="/src/app.js"></script>
    <script>
      let i18nService = null;
      
      function toggleLanguage() {
        const flag = document.getElementById('language-flag');
        const currentLang = document.documentElement.getAttribute('lang') || 'en';
        const newLang = currentLang === 'en' ? 'tr' : 'en';
        const flagSrc = newLang === 'tr' ? '/src/assets/images/flag-tr.svg' : '/src/assets/images/flag-en.svg';
        
        // Update flag
        flag.src = flagSrc;
        flag.alt = newLang === 'tr' ? 'Turkish' : 'English';
        
        // Update language through i18n service if available
        if (window.i18n && window.i18n.setLanguage) {
          window.i18n.setLanguage(newLang);
        } else {
          // Fallback: update HTML lang and dispatch event
          document.documentElement.setAttribute('lang', newLang);
          window.dispatchEvent(new CustomEvent('language-changed', { 
            detail: { language: newLang } 
          }));
        }
        
        // Update navigation text
        updateNavigationText(newLang);
      }
      
      function updateNavigationText(lang) {
        const translations = {
          en: {
            employees: 'Employees',
            addNew: 'Add New'
          },
          tr: {
            employees: 'Çalışanlar',
            addNew: 'Yeni Ekle'
          }
        };
        
        const homeText = document.getElementById('nav-home-text');
        const addText = document.getElementById('nav-add-text');
        
        if (homeText) homeText.textContent = translations[lang].employees;
        if (addText) addText.textContent = translations[lang].addNew;
      }
      
      // Initialize flag and text based on current language
      document.addEventListener('DOMContentLoaded', function() {
        const currentLang = document.documentElement.getAttribute('lang') || 'en';
        const flag = document.getElementById('language-flag');
        const flagSrc = currentLang === 'tr' ? '/src/assets/images/flag-tr.svg' : '/src/assets/images/flag-en.svg';
        flag.src = flagSrc;
        updateNavigationText(currentLang);
      });
      
      // Listen for language changes from other parts of the app
      window.addEventListener('language-changed', function(event) {
        const newLang = event.detail.language;
        const flag = document.getElementById('language-flag');
        const flagSrc = newLang === 'tr' ? '/src/assets/images/flag-tr.svg' : '/src/assets/images/flag-en.svg';
        flag.src = flagSrc;
        updateNavigationText(newLang);
      });
    </script>
  </body>
</html>
